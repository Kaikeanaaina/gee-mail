<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser



        var messageList = document.createElement('div');
		messageList.id = "messageList";
		document.getElementById('main').appendChild(messageList);



		var displayMessage = function(){

			for(var i=0;i<window.geemails.length;i++){
					//this allows me to list it each message that passes through
				var div = document.createElement('div');
				div.id = "message_"+(i);
				div.className = "aMessageAtATime";
				document.getElementById('messageList').appendChild(div);

				var pMessage = document.createElement('p');
				pMessage.id = 'pMessage'+(i);
				pMessage.className = 'pMessage';
				pMessage.innerHTML = 'Message';
				document.getElementById("message_"+(i)).appendChild(pMessage);
				// pMessage.addEventListener('click',function(){
					
				// 	hidingContext.style.display='block';
				// });

				var anotherDiv = document.createElement('div');
				anotherDiv.id = 'div_'+(i);
				anotherDiv.className = 'divWithContent';
				document.getElementById('message_'+(i)).appendChild(anotherDiv);

				var subjectTitle = document.createElement('p');
				subjectTitle.id = 'subject'+(i);
				subjectTitle.className = 'subject';
				subjectTitle.innerHTML = window.geemails[i].subject;
				//subject at the end of this innerHTML has an error in the console
				document.getElementById("div_"+(i)).appendChild(subjectTitle);
				
				var from = document.createElement('p');
				from.id = 'from'+(i);
				from.className = 'from';
				from.innerHTML = "From: " + window.geemails[i].sender;
				document.getElementById("div_"+(i)).appendChild(from);
				
				var aDate = document.createElement('p');
				aDate.id = 'date'+(i);
				aDate.className = 'date';
				aDate.innerHTML = window.geemails[i].date;
				document.getElementById("div_"+(i)).appendChild(aDate);

				var textBody = document.createElement('p');
				textBody.id = 'body'+(i);
				textBody.className = 'body';
				textBody.innerHTML = window.geemails[i].body;
				document.getElementById("div_"+(i)).appendChild(textBody);
			


				// var hidingContext = document.getElementById('div_'+(i));
				// hidingContext.style.display= 'none';

			}

		};
		//calling the function
		displayMessage();




		//hiding the context
		function clickingTheMessage(){
			for(var i=0;i<window.geemails.length;i++){

				var hidingContext = document.getElementById('div_'+(i));
				hidingContext.style.display = 'none';

				var openMessage = document.getElementById('message_'+(i));
				openMessage.addEventListener('click',function(){
					this.querySelector('.divWithContent').style.display = 'block';
					
				});
			}
		}

		clickingTheMessage();	


		//document.querySelector(".divWithContent").style.backgroundColor = "red";


	

		



		for(var i=0;i<window.geemails.length;i++){

			//highlight over the subject
			document.getElementById('pMessage'+(i)).addEventListener("mouseover", function(){ 
				this.style.backgroundColor = '#D3D3D3'; 
			});

			document.getElementById('pMessage'+(i)).addEventListener("mouseout", function(){ 
				this.style.backgroundColor = 'inherit'; 
			});

			//highlight over the subject
			document.getElementById('subject'+(i)).addEventListener("mouseover", function(){ 
				this.style.backgroundColor = '#D3D3D3'; 
			});

			document.getElementById('subject'+(i)).addEventListener("mouseout", function(){ 
				this.style.backgroundColor = 'inherit'; 
			});

			//highlight over sender
			document.getElementById('from'+(i)).addEventListener("mouseover", function(){ 
				this.style.backgroundColor = '#D3D3D3'; 
			});

			document.getElementById('from'+(i)).addEventListener("mouseout", function(){ 
				this.style.backgroundColor = 'inherit'; 
			});

			//highlight over dates
			document.getElementById('date'+(i)).addEventListener("mouseover", function(){ 
				this.style.backgroundColor = '#D3D3D3'; 
			});

			document.getElementById('date'+(i)).addEventListener("mouseout", function(){ 
				this.style.backgroundColor = 'inherit'; 
			});

			//highlight over textbody
			document.getElementById('body'+(i)).addEventListener("mouseover", function(){ 
				this.style.backgroundColor = '#D3D3D3'; 
			});

			document.getElementById('body'+(i)).addEventListener("mouseout", function(){ 
				this.style.backgroundColor = 'inherit'; 
			});
		}



		
		var myVar = setInterval(myTimer, 3000);

		function myTimer() {
		    var aloha = document.createElement('div');
		    aloha.innerHTML = getNewMessage();
		    document.getElementById('newMessageFiller').appendChild(aloha);

		}
		
		var newMessageFiller = document.createElement('div');
		newMessageFiller.id = 'newMessageFiller';
		
		document.body.appendChild(newMessageFiller);

		
		


		
        
      };
    </script>
	</head>
	<body>
		<div class="container" id="main">
			<!-- Build Me! -->
		</div>
	</body>
</html>



